<!DOCTYPE html>
<html>
<head>
<title>Employee Panel</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<h2>Employee Dashboard</h2>

<div id="empInfo"></div>

<div class="section">
  <h3>Attendance</h3>
  <button onclick="markAttendance()">Mark Attendance</button>
  <div id="attList"></div>
</div>

<div class="section">
  <h3>Performance</h3>
  <textarea id="work" placeholder="Today work"></textarea>
  <button onclick="submitWork()">Submit Work</button>
  <div id="perfList"></div>
</div>

<div class="section">
  <h3>Salary</h3>
  <button onclick="calculateSalary()">Calculate Salary</button>
  <p id="salary"></p>
</div>

<script>
// ✅ DOM
let empInfo = document.getElementById("empInfo");
let attList = document.getElementById("attList");
let perfList = document.getElementById("perfList");
let work = document.getElementById("work");
let salary = document.getElementById("salary");

// ✅ Demo employee (FIRST TIME ONLY)
if(!localStorage.getItem("employees")){
  localStorage.setItem("employees", JSON.stringify([
    {
      id:"101",
      name:"Rahul Kumar",
      salary:500,
      photo:"https://cdn-icons-png.flaticon.com/512/3135/3135715.png"
    }
  ]));
}

// ✅ Load employees
let employees = JSON.parse(localStorage.getItem("employees"));

// ✅ Login simulation
let empId = prompt("Enter Employee ID (101)");
let employee = employees.find(e => e.id === empId);

if(!employee){
  alert("Employee not found");
  location.href = "index.html";
}

// ✅ Show info
empInfo.innerHTML = `
  <img src="${employee.photo}" width="80"><br>
  <h3>${employee.name}</h3>
  <p>ID: ${employee.id}</p>
  <p>Per Day Salary: ₹${employee.salary}</p>
`;

// ✅ Attendance
let attendance = JSON.parse(localStorage.getItem("attendance_"+employee.id) || "[]");
let performance = JSON.parse(localStorage.getItem("performance_"+employee.id) || "[]");

function markAttendance(){
  let today = new Date().toLocaleDateString();
  attendance.push({date:today,status:"Present"});
  localStorage.setItem("attendance_"+employee.id, JSON.stringify(attendance));
  showAttendance();
}

function showAttendance(){
  attList.innerHTML = attendance.map(a=>`${a.date} - ${a.status}`).join("<br>");
}
showAttendance();

// ✅ Performance
function submitWork(){
  if(work.value.trim()===""){
    alert("Enter work details");
    return;
  }
  performance.push({
    date:new Date().toLocaleDateString(),
    work:work.value
  });
  localStorage.setItem("performance_"+employee.id, JSON.stringify(performance));
  work.value="";
  showPerformance();
}

function showPerformance(){
  perfList.innerHTML = performance.map(p=>`${p.date} - ${p.work}`).join("<br>");
}
showPerformance();

// ✅ Salary
function calculateSalary(){
  let total = attendance.length * employee.salary;
  salary.innerHTML = `Total Days: ${attendance.length}<br>Total Salary: ₹${total}`;
}
</script>

</body>
</html>
