<!DOCTYPE html>
<html>
<head>
  <title>Employee Panel</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    h2 { color: #333; }
    #empInfo {
      text-align: center;
      margin-bottom: 20px;
      background: #fff;
      padding: 15px 30px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .section {
      background: #fff;
      padding: 15px 20px;
      margin: 10px 0;
      width: 400px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #f0f0f0;
    }
    button {
      background-color: #4CAF50;
      color: white;
      padding: 8px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 5px;
    }
    button:hover { background-color: #45a049; }
    textarea {
      width: 100%;
      height: 60px;
      padding: 5px;
      margin-top: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    #salary {
      font-weight: bold;
      color: #333;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<h2>Employee Dashboard</h2>

<div id="empInfo"></div>

<div class="section">
  <h3>Attendance</h3>
  <button onclick="markAttendance()">Mark Attendance</button>
  <div id="attList"></div>
</div>

<div class="section">
  <h3>Performance</h3>
  <textarea id="work" placeholder="Enter today's work"></textarea>
  <button onclick="submitWork()">Submit Work</button>
  <div id="perfList"></div>
</div>

<div class="section">
  <h3>Salary</h3>
  <button onclick="calculateSalary()">Calculate Salary</button>
  <p id="salary"></p>
</div>

<script>
  // ✅ DOM
  let empInfo = document.getElementById("empInfo");
  let attList = document.getElementById("attList");
  let perfList = document.getElementById("perfList");
  let work = document.getElementById("work");
  let salary = document.getElementById("salary");

  // ✅ Demo employees
  if(!localStorage.getItem("employees")){
    localStorage.setItem("employees", JSON.stringify([
      { id:"101", name:"Rahul Kumar", salary:500, photo:"https://cdn-icons-png.flaticon.com/512/3135/3135715.png" },
      { id:"102", name:"Nikhil Prajapati", salary:600, photo:"https://cdn-icons-png.flaticon.com/512/149/149071.png" },
      { id:"103", name:"Anand Shukla", salary:700, photo:"https://cdn-icons-png.flaticon.com/512/4140/4140046.png" }
    ]));
  }

  let employees = JSON.parse(localStorage.getItem("employees"));

  // ✅ Login
  let empId = prompt("Enter your Employee ID (e.g., 101)");
  let employee = employees.find(e => e.id === empId);

  if(!employee){
    alert("Employee not found!");
    location.reload();
  }

  // ✅ Show employee info
  empInfo.innerHTML = `
    <img src="${employee.photo}" width="80"><br>
    <h3>${employee.name}</h3>
    <p>ID: ${employee.id}</p>
    <p>Per Day Salary: ₹${employee.salary}</p>
  `;

  // ✅ Load attendance & performance
  let attendance = JSON.parse(localStorage.getItem("attendance_"+employee.id) || "[]");
  let performance = JSON.parse(localStorage.getItem("performance_"+employee.id) || "[]");

  // ✅ Attendance functions
  function markAttendance(){
    let today = new Date().toLocaleDateString();
    if(attendance.find(a => a.date === today)){
      alert("Attendance already marked today!");
      return;
    }
    attendance.push({date:today,status:"Present"});
    localStorage.setItem("attendance_"+employee.id, JSON.stringify(attendance));
    showAttendance();
  }

  function showAttendance(){
    if(attendance.length === 0){
      attList.innerHTML = "No attendance records yet.";
      return;
    }
    attList.innerHTML = `
      <table>
        <tr><th>Date</th><th>Status</th></tr>
        ${attendance.map(a => `<tr><td>${a.date}</td><td>${a.status}</td></tr>`).join("")}
      </table>
    `;
  }
  showAttendance();

  // ✅ Performance functions
  function submitWork(){
    if(work.value.trim()===""){
      alert("Enter work details");
      return;
    }
    performance.push({
      date:new Date().toLocaleDateString(),
      work:work.value
    });
    localStorage.setItem("performance_"+employee.id, JSON.stringify(performance));
    work.value="";
    showPerformance();
  }

  function showPerformance(){
    if(performance.length === 0){
      perfList.innerHTML = "No work submitted yet.";
      return;
    }
    perfList.innerHTML = `
      <table>
        <tr><th>Date</th><th>Work</th></tr>
        ${performance.map(p => `<tr><td>${p.date}</td><td>${p.work}</td></tr>`).join("")}
      </table>
    `;
  }
  showPerformance();

  // ✅ Salary
  function calculateSalary(){
    let total = attendance.length * employee.salary;
    salary.innerHTML = `Total Days: ${attendance.length}<br>Total Salary: ₹${total}`;
  }
</script>

</body>
</html>
